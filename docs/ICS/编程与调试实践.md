# ç¼–ç¨‹ä¸è°ƒè¯•å®è·µ

## èµ„æ–™
* [è¯¾ç¨‹è§†é¢‘](https://www.icourse163.org/learn/NJU-1449521162?tid=1474200460#/learn/content?type=detail&id=1262322703&sm=1)

## Lec 1 å®éªŒä¸å¼€å‘ç¯å¢ƒå®‰è£…å’Œä½¿ç”¨
1. ä»ç¨‹åºå‘˜è§’åº¦è®¤è¯†ç³»ç»Ÿ
    ![1-1 ä»ç¨‹åºå‘˜è§’åº¦è®¤è¯†ç³»ç»Ÿ](../files/ICS/1-1 ä»ç¨‹åºå‘˜è§’åº¦è®¤è¯†ç³»ç»Ÿ.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. è™šæ‹Ÿæœºã€LinuxåŠå…¶ä¸Šå®éªŒç¯å¢ƒçš„å®‰è£…
    ![1-2Â è™šæ‹Ÿæœºã€LinuxåŠå…¶ä¸Šå®éªŒç¯å¢ƒçš„å®‰è£…](../files/ICS/1-2Â è™šæ‹Ÿæœºã€LinuxåŠå…¶ä¸Šå®éªŒç¯å¢ƒçš„å®‰è£….pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

    debian-9.9.0-i386-xfce-CD-1.isoä¸‹è½½ï¼šhttps://mirrors.huaweicloud.com/debian-cd/9.9.0/i386/iso-cd/ è™šæ‹Ÿæœºä¸å¦‚ä½¿ç”¨ wslã€‚

3. åŸºæœ¬å®éªŒå·¥å…·çš„ä½¿ç”¨
    ![1-3åŸºæœ¬å®éªŒå·¥å…·çš„ä½¿ç”¨](../files/ICS/1-3åŸºæœ¬å®éªŒå·¥å…·çš„ä½¿ç”¨.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

## Lec 2 Cè¯­è¨€ç¼–ç¨‹ä¸å®è·µ
1. ppt:
    ![Cè¯­è¨€ç¼–ç¨‹ä¸å®è·µ](../files/ICS/2. Cè¯­è¨€ç¼–ç¨‹ä¸å®è·µ.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. æ‰§è¡Œç¬¦å·æ‰©å±•è¿˜æ˜¯é›¶æ‰©å±•ï¼šç”±ç­‰å·å³è¾¹çš„å˜é‡ç±»å‹å†³å®šï¼Œä¸ç­‰å·å·¦è¾¹æ— å…³ã€‚
    ![alt text](../img/image-60.png)

3. Kahanç´¯åŠ ç®—æ³•ï¼š
    - ä¸»è¦æ€æƒ³ï¼šè®¾æ³•è®¡ç®—å‡ºæ¯æ¬¡ç´¯åŠ æ‰€å¸¦æ¥çš„èˆå…¥è¯¯å·®ï¼Œå¹¶å°†å…¶æ·»åŠ åœ¨ä¸‹ä¸€æ¬¡çš„åŠ æ•°ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥è·å¾—æ›´ä¸ºå‡†ç¡®çš„ç»“æœã€‚
    - ä½¿ç”¨å‰æï¼šå°½é‡åœ¨æµ®ç‚¹æ•°æ•°å€¼ç›¸è¿‘æ—¶è¿›è¡ŒåŠ å‡è®¡ç®—æ‰èƒ½å……åˆ†åˆ©ç”¨æœ‰æ•ˆä½æ•°ã€‚

    å„å‚æ•°å«ä¹‰ï¼š

    - c: ç´¯åŠ äº§ç”Ÿçš„è¯¯å·®
    - y: ç»è¿‡è¯¯å·®ä¿®æ­£åçš„åŠ æ•°
    - t: ç»è¿‡æœ¬æ¬¡ç´¯åŠ åçš„å’Œ
    - t-sum: æœ¬æ¬¡ç´¯åŠ å®é™…åŠ ä¸Šçš„åŠ æ•°

4. åˆ†å—çŸ©é˜µä¹˜æ³•
   ![alt text](../img/image-61.png)

    ```C
    #include <stdio.h>
    #include <stdlib.h>
    #include <sys/time.h>
    #include <math.h>
    void multMat(int n, float *A, float *B, float *C, int blocksize) 
    {
        int i, j, k, b_i, b_j, b_k;
        register float temp = 0;
        int block_num = n / blocksize;
        printf("block_num = %d\n", block_num);
        /* This is ijk loop order */
        for (b_i = 0; b_i < block_num; b_i++) {
            for (b_j = 0; b_j < block_num; b_j++) {
                for (b_k = 0; b_k < block_num; b_k++) {
                    for (i = 0; i < blocksize; i++) {
                        for (j = 0; j < blocksize; j++) {
                            temp = 0;
                            for (k = 0; k < blocksize; k++) {
                                temp += A[(b_i * blocksize + i) * n + (b_k * blocksize + k)] * 
                                        B[(b_k * blocksize + k) * n + (b_j * blocksize + j)];
                            }
                            C[(b_i * blocksize + i) * n + (b_j * blocksize + j)] += temp;
                        }
                    }
                }
            }
        }
    }

    void multMat3(int n, float *A, float *B, float *C) 
    {
        int i, j, k;
        register float temp = 0;
        for (i = 0; i < n; i++) {
            for (j = 0; j < n; j++) {
                temp = 0;
                for (k = 0; k < n; k++) {
                    temp += A[i * n + k] * B[k * n + j];
                }
                C[i * n + j] = temp;
            }
        }
    }

    int main(int argc, char **argv) 
    {
        int nmax = 2048, i, j;
        int blocksize = 16;
        float temp = 0;
        double seconds;

        float *A = (float *)malloc(nmax * nmax * sizeof(float));
        float *B = (float *)malloc(nmax * nmax * sizeof(float));   
        float *C = (float *)malloc(nmax * nmax * sizeof(float));
        float *D = (float *)malloc(nmax * nmax * sizeof(float));

        struct timeval start, end;

        for(i = 0; i < nmax * nmax; i++) A[i] = drand48() * 2 - 1;
        for(i = 0; i < nmax * nmax; i++) B[i] = drand48() * 2 - 1;
        for(i = 0; i < nmax * nmax; i++) C[i] = 0;
        for(i = 0; i < nmax * nmax; i++) D[i] = 0;

        gettimeofday(&start, NULL);
        multMat3(nmax, A, B, D);
        gettimeofday(&end, NULL);

        seconds = (end.tv_sec - start.tv_sec) + 1.0e-6 *(end.tv_usec - start.tv_usec);
        printf("n = %d, time = %.3f seconds\n", nmax, seconds);

        gettimeofday(&start, NULL);
        multMat(nmax, A, B, C, blocksize);
        gettimeofday(&end, NULL);
        
        seconds = (end.tv_sec - start.tv_sec) + 1.0e-6 *(end.tv_usec - start.tv_usec);
        printf("n = %d, blocksize = %d, time = %.3f seconds\n", nmax, blocksize, seconds);
        
        for (i = 0; i < nmax; i++)
            for (j = 0; j < nmax; j++)
                temp += (C[i * nmax + j] - D[i * nmax + j]) * (C[i * nmax + j] - D[i * nmax + j]);
        printf("error = %.4f\n", temp);

        free(A);
        free(B);
        free(C);
        free(D);
        
        return 0;
    }
    ```

    output:
    ```shell
    linux$ ./matrixMB 
    n = 2048, time = 90.180 seconds
    block_num = 128
    n = 2048, blocksize = 16, time = 26.730 seconds
    error = 0.0007
    ```

5. ä¿¡å·å¤„ç†å‡½æ•°ä¸setjmp/longjmp

    ```C
    #include <stdio.h>
    #include <setjmp.h>
    #include <signal.h>
    #include <unistd.h>

    sigjmp_buf buf;

    void FLPhandler(int sig) 
    {
        printf("I am in FLPhandler...\n");
        siglongjmp(buf, 1);
    }

    int main()
    {
        int a, t;
        signal(SIGFPE, FLPhandler);

        if (sigsetjmp(buf, 1) == 0) 
        {
            printf("starting\n");
            a = 100;
            t = 0;
            a = a / t;
        } 
        else 
        {
            printf("I am still alive...\n");
        }
        return 0;
    }
    ```

    output:
    ```shell
    linux$ ./signal 
    starting
    I am in FLPhandler...
    I am still alive...
    ```

    <a id="setjmp_longjmp"></a>

       ![ä¿¡å·å¤„ç†å‡½æ•°](../files/ICS/ä¿¡å·å¤„ç†å‡½æ•°å’Œsetjmp_longjmp.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

## Lec 3 æ•°æ®çš„å­˜å‚¨ä¸è¿ç®—
1. çœŸå€¼ä¸æœºå™¨æ•°:
    ![3-1 çœŸå€¼ä¸æœºå™¨æ•°-32ä¸­çš„å¼‚å¸¸ä¸­æ–­æœºåˆ¶](../files/ICS/3-1 çœŸå€¼ä¸æœºå™¨æ•°.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. æ•°æ®çš„å®½åº¦ä¸å­˜å‚¨
    ![3-2æ•°æ®çš„å®½åº¦ä¸å­˜å‚¨](../files/ICS/3-2æ•°æ®çš„å®½åº¦ä¸å­˜å‚¨.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

3. æ•°æ®ç±»å‹çš„è½¬æ¢
    ![3-3æ•°æ®ç±»å‹çš„è½¬æ¢](../files/ICS/3-3æ•°æ®ç±»å‹çš„è½¬æ¢.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

    æ•´æ•°å’Œæµ®ç‚¹æ•°ä¹‹é—´çš„è½¬æ¢ï¼šè¦è¿›è¡Œæ•°æ®ç¼–ç æ ¼å¼ä¸Šçš„è½¬æ¢ï¼Œè€Œä¸æ˜¯æœºå™¨æ•°ä¸Šçš„ç›´æ¥å¤åˆ¶ã€‚

    - è¡¥ç  -> float ç¼–ç  -> è¡¥ç 

    ```C
    #include "stdio.h"
    int main()
    {   
        int i1 = 0x7fffffff, i2, itemp;
        float f1 = 0x987654321, f2, ftemp;
        ftemp = i1;
        i2 = ftemp;  // i2 = (int)(float)i1;
        itemp = f1;
        f2 = itemp;  // f2 = (float)(int)f1;
        // æ³¨æ„åœ¨æŸäº›ç¼–è¯‘ä¼˜åŒ–é€‰é¡¹ä¸‹ï¼Œæ³¨é‡Šé‡Œçš„ä»£ç i1å’Œi2ä¼šç›¸ç­‰ï¼Œf1å’Œf2ä¼šç›¸ç­‰
        printf("i1 = %d, i2  = %d, f1 = %f, f2 = %f\n", i1, i2, f1, f2);
        // i1 â‰  i2: å› ä¸ºi1è½¬æ¢ä¸ºæµ®ç‚¹æ•°ftempæ—¶åšè¿‡+1çš„è¿‘ä¼¼å¤„ç†ï¼Œç²¾åº¦æŸå¤±
        // f1 â‰  f2: å› ä¸ºè½¬æ¢è¿‡ç¨‹ä¸­æœ‰æº¢å‡ºï¼Œ36ä½ -> 32 ä½
    }
    ```

    output:
    ```shell
    linux$./type_conversion
    i1 = 2147483647, i2  = -2147483648, f1 = 40926265344.000000, f2 = -2147483648.000000
    ```

4. æ•´æ•°åŠ å‡è¿ç®—
    ![3-4æ•´æ•°åŠ å‡è¿ç®—](../files/ICS/3-4æ•´æ•°åŠ å‡è¿ç®—.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

    ![alt text](../img/image-62.png)

5. æµ®ç‚¹æ•°çš„è¡¨ç¤ºå’Œè¿ç®—
    ![3-5æµ®ç‚¹æ•°çš„è¡¨ç¤ºå’Œè¿ç®—](../files/ICS/3-5æµ®ç‚¹æ•°çš„è¡¨ç¤ºå’Œè¿ç®—.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

     æ˜¾ç¤ºæ ˆå¸§é‡Œçš„å±€éƒ¨å˜é‡ï¼š
     ![alt text](../img/image-63.png)

## Lec 4 ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º
1. ä¼ é€æŒ‡ä»¤
   ![4-1ä¼ é€æŒ‡ä»¤](../files/ICS/4-1ä¼ é€æŒ‡ä»¤.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. ğŸ“Œ æ•´æ•°åŠ å‡è¿ç®—æŒ‡ä»¤
    ![4-2æ•´æ•°åŠ å‡è¿ç®—æŒ‡ä»¤](../files/ICS/4-2æ•´æ•°åŠ å‡è¿ç®—æŒ‡ä»¤.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

3. ğŸ“Œ æ•´æ•°ä¹˜æ³•æŒ‡ä»¤
    ![4-3æ•´æ•°ä¹˜æ³•æŒ‡ä»¤](../files/ICS/4-3æ•´æ•°ä¹˜æ³•æŒ‡ä»¤.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

4. ğŸ“Œ æ§åˆ¶è½¬ç§»æŒ‡ä»¤
    ![4-4æ§åˆ¶è½¬ç§»æŒ‡ä»¤](../files/ICS/4-4æ§åˆ¶è½¬ç§»æŒ‡ä»¤.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

5. ğŸ“Œ æ ˆå’Œè¿‡ç¨‹è°ƒç”¨
    ![4-5æ ˆå’Œè¿‡ç¨‹è°ƒç”¨](../files/ICS/4-5æ ˆå’Œè¿‡ç¨‹è°ƒç”¨.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

6. ğŸ“Œ ç¼“å†²åŒºæº¢å‡º
    ![4-6ç¼“å†²åŒºæº¢å‡º](../files/ICS/4-6ç¼“å†²åŒºæº¢å‡º.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

## Lec 5 äºŒè¿›åˆ¶ç¨‹åºé€†å‘å·¥ç¨‹
1. ppt:
   ![5. äºŒè¿›åˆ¶ç¨‹åºé€†å‘å·¥ç¨‹](../files/ICS/5. äºŒè¿›åˆ¶ç¨‹åºé€†å‘å·¥ç¨‹.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. å®éªŒæ–‡æ¡£
   ![bomblab](../files/ICS/bomblab.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

3. phase_0:

    ```asm
    0804946f <phase_0>:
    804946f:	55                   	push   %ebp
    8049470:	89 e5                	mov    %esp,%ebp
    8049472:	83 ec 08             	sub    $0x8,%esp
    8049475:	83 ec 08             	sub    $0x8,%esp
    8049478:	68 98 a1 04 08       	push   $0x804a198
    804947d:	ff 75 08             	push   0x8(%ebp)
    8049480:	e8 52 07 00 00       	call   8049bd7 <strings_not_equal>
    8049485:	83 c4 10             	add    $0x10,%esp
    8049488:	85 c0                	test   %eax,%eax
    804948a:	74 0c                	je     8049498 <phase_0+0x29>
    804948c:	e8 ae 09 00 00       	call   8049e3f <explode_bomb>
    8049491:	b8 00 00 00 00       	mov    $0x0,%eax
    8049496:	eb 05                	jmp    804949d <phase_0+0x2e>
    8049498:	b8 01 00 00 00       	mov    $0x1,%eax
    804949d:	c9                   	leave
    804949e:	c3                   	ret
    ```

    é‡ç‚¹å…³æ³¨0x804a198åœ°å€å¤„çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œå®ƒå³æ˜¯æˆ‘ä»¬è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²ï¼Œä¸ç›¸ç­‰åˆ™ç‚¸å¼¹çˆ†ç‚¸ï¼š

    ```shell
    (gdb) b *0x8049480
    Breakpoint 1 at 0x8049480
    (gdb) r
    Breakpoint 1, 0x08049480 in phase_0 ()
    (gdb) x/1s 0x804a198
    0x804a198:      "Disks are constructed from platters."
    ```

4. phase_1:

    ```asm
    0804949f <phase_1>:
    804949f:	55                   	push   %ebp
    80494a0:	89 e5                	mov    %esp,%ebp
    80494a2:	83 ec 28             	sub    $0x28,%esp
    80494a5:	c7 45 f4 f6 cc 4e 1a 	movl   $0x1a4eccf6,-0xc(%ebp)
    80494ac:	db 45 f4             	fildl  -0xc(%ebp)
    80494af:	dd 5d e8             	fstpl  -0x18(%ebp)
    # ç”¨æ•´å‹å¸¸é‡0x1a4eccf6å¯¹-0x18(%ebp)ä¸­å­˜å‚¨çš„æµ®ç‚¹æ•°è¿›è¡Œåˆå§‹åŒ–
    80494b2:	8d 45 e0             	lea    -0x20(%ebp),%eax
    80494b5:	50                   	push   %eax
    80494b6:	8d 45 e4             	lea    -0x1c(%ebp),%eax
    80494b9:	50                   	push   %eax
    80494ba:	68 bd a1 04 08       	push   $0x804a1bd
    80494bf:	ff 75 08             	push   0x8(%ebp)
    # 0x8(%ebp)ä¸­å­˜å‚¨äº†phase_1ä¸»å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³æœ¬é˜¶æ®µè¾“å…¥å­—ç¬¦ä¸²çš„åœ°å€
    # gdbæŸ¥çœ‹0x804a1bdåœ°å€å¤„çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸º"%d %d"ï¼Œå› æ­¤éœ€è¦è¾“å…¥ä¸¤ä¸ªæ•´æ•°
    # int sscanf(const char *s, const char *format, ...)
    80494c2:	e8 09 fc ff ff       	call   80490d0 <__isoc99_sscanf@plt>
    80494c7:	83 c4 10             	add    $0x10,%esp
    80494ca:	83 f8 02             	cmp    $0x2,%eax
    # è¯»å…¥çš„æ•´æ•°æ•°é‡ä¸º2ä¸ªæ—¶æ‰ç»§ç»­æ£€æŸ¥æ‰§è¡Œï¼Œå¦åˆ™ç›´æ¥çˆ†ç‚¸
    80494cd:	74 0c                	je     80494db <phase_1+0x3c>
    80494cf:	e8 6b 09 00 00       	call   8049e3f <explode_bomb>
    80494d4:	b8 00 00 00 00       	mov    $0x0,%eax
    80494d9:	eb 2c                	jmp    8049507 <phase_1+0x68>
    80494db:	8d 45 e8             	lea    -0x18(%ebp),%eax
    80494de:	8b 10                	mov    (%eax),%edx
    80494e0:	8b 45 e4             	mov    -0x1c(%ebp),%eax
    80494e3:	39 c2                	cmp    %eax,%edx
    80494e5:	75 0f                	jne    80494f6 <phase_1+0x57>
    80494e7:	8d 45 e8             	lea    -0x18(%ebp),%eax
    80494ea:	83 c0 04             	add    $0x4,%eax
    80494ed:	8b 10                	mov    (%eax),%edx
    80494ef:	8b 45 e0             	mov    -0x20(%ebp),%eax
    80494f2:	39 c2                	cmp    %eax,%edx
    80494f4:	74 0c                	je     8049502 <phase_1+0x63>
    80494f6:	e8 44 09 00 00       	call   8049e3f <explode_bomb>
    80494fb:	b8 00 00 00 00       	mov    $0x0,%eax
    8049500:	eb 05                	jmp    8049507 <phase_1+0x68>
    8049502:	b8 01 00 00 00       	mov    $0x1,%eax
    8049507:	c9                   	leave
    8049508:	c3                   	ret
    ```

    é‡ç‚¹å…³æ³¨0x1a4eccf6ï¼Œå®ƒå³æ˜¯æˆ‘ä»¬è¦æ¯”è¾ƒçš„æµ®ç‚¹æ•°ï¼Œä¸ç›¸ç­‰åˆ™ç‚¸å¼¹çˆ†ç‚¸ï¼Œæ•´å‹å€¼0x1a4eccf6å¯¹åº”çš„åŒç²¾åº¦æµ®ç‚¹æ•°IEEE754ç¼–ç ä¸º0xï¼Œä½32ä½ä¸º0xï¼Œåè¿›åˆ¶æ˜¯ï¼Œé«˜32ä½ä¸º0xï¼Œåè¿›åˆ¶æ˜¯ï¼Œå› æ­¤ç­”æ¡ˆæ˜¯ã€‚

    ```shell
    (gdb) b *0x80494b9
    Breakpoint 1 at 0x80494b9
    (gdb) r
    Breakpoint 1, 0x080494b9 in phase_1 ()
    (gdb) x/1s 0x804a1bd
    0x804a1bd:      "%d %d"
    ```

## Lec 6 ç¼“å†²åŒºæº¢å‡ºæ”»å‡»
1. ppt:
   ![6. ç¼“å†²åŒºæº¢å‡ºæ”»å‡»](../files/ICS/6. ç¼“å†²åŒºæº¢å‡ºæ”»å‡».pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

2. å®éªŒæ–‡æ¡£
   ![buflab](../files/ICS/buflab.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

3. ğŸ“Œ

## Lec 7 ç¨‹åºçš„é“¾æ¥
1. ppt:
   ![7. ç¨‹åºçš„é“¾æ¥](../files/ICS/7. ç¨‹åºçš„é“¾æ¥.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }

## Lec 8 ç¨‹åºæ€§èƒ½åˆ†æä¸ä¼˜åŒ–
1. ppt:
   ![8. ç¨‹åºæ€§èƒ½åˆ†æä¸ä¼˜åŒ–](../files/ICS/8. ç¨‹åºæ€§èƒ½åˆ†æä¸ä¼˜åŒ–.pdf){ type=application/pdf style="width:100%; min-height:58vh;" }