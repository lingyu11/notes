# 程序的执行和存储访问

## 资料
* [课程视频](https://www.icourse163.org/learn/NJU-1001964032?tid=1474157485#/learn/content?type=detail&id=1262939503&sm=1)

## Lec 1 程序执行概述
1. ppt:
    ![第1周 程序执行概述](../files/ICS/第1周 程序执行概述.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

## Lec 2 主存储器组织
1. ppt:
    ![第2周 主存储器组织](../files/ICS/第2周 主存储器组织.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

## Lec 3 磁盘存储器
1. ppt:
   ![第3周 磁盘存储器](../files/ICS/第3周 磁盘存储器.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

## Lec 4 高速缓存概述
1. ppt:
   ![第4周 高速缓存概述](../files/ICS/第4周 高速缓存概述.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

2. 主存块和cache行可以有以下三种方式进行映射：

    - 直接映射 (Direct)：每个主存块映射到cache中的固定行。➡️ 只有一个可能的位置，关联度为1
        - 👍容易实现，命中时间短。
        - 👍无需考虑淘汰（替换）问题，因为一个cache行里只能存放一个主存块，总是替换它。
        - 👎但是不够灵活，cahche存储空间得不到充分利用，命中率低。例如block 0/16/32总是映射到cache行0，这样来回访问block 0/16/32时，cache行0总是被替换，导致cache命中率低，此时就算其他的cache行是空的也不能用。
    - 全相联映射 (Full Associate)：每个主存块可以映射到cache中的任意行。➡️ 每个位置都可能，关联度为cache总行数
        - 按内容访问，是相联存取方式，因为不知道是放在哪个地址里，只能一个个对比内容即Tag (实际上是并行比较)，是想要的则找到，不是按地址访问。
        - 主存-磁盘间常用这个全相联，因为此时命中率更重要，命中时间不那么重要，一次不命中需要花费上百万个时钟周期区访问磁盘。
    - 组相联映射 (Set Associate)：每个主存块映射到cache中固定组中的任意一行。➡️ 有N个可能的位置，关联度为N
        - N-way set associative cache：一个组(set)里可以存放N个cache行。

    关联度和 miss rate/命中时间的关系：

    - 缺失率：直接映射最高，全相联映射最低
    - 命中时间：直接映射最小，全相联映射最大

## Lec 5 Cache替换算法和写策略
1. ppt:
   ![第5周 Cache替换算法和写策略](../files/ICS/第5周 Cache替换算法和写策略.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

2. 写策略：
    - 写命中时：
        - Write Through (写直达)：每次写操作都同时更新主存和cache。
        - Write Back (写回)：写操作只更新cache，只有在cache行被替换时才更新主存。
    - 写不命中时：
        - Write Allocate (写分配)：在写不命中时，先将数据写入cache，然后更新主存。
        - No Write Allocate (非写分配)：在写不命中时，不将数据写入cache，而是直接更新主存。

## Lec 6 虚拟存储器
1. ppt:
   ![第6周 虚拟存储器的机器级表示](../files/ICS/第6周 虚拟存储器.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }

## Lec 7 IA-32中的地址转换
1. ppt:
   ![第7周 IA-32中的地址转换](../files/ICS/第7周 IA-32中的地址转换.pdf){ type=application/pdf style="width:100%; min-height:70vh;" }
