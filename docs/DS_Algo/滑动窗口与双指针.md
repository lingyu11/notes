# æ»‘åŠ¨çª—å£ä¸åŒæŒ‡é’ˆ

## èµ„æ–™
* [æ»‘åŠ¨çª—å£ä¸åŒæŒ‡é’ˆ](https://leetcode.cn/circle/discuss/0viNMK/)

## ä¸€ã€å®šé•¿æ»‘åŠ¨çª—å£

### Â§1.1 åŸºç¡€
1. [å®šé•¿å­ä¸²ä¸­å…ƒéŸ³çš„æœ€å¤§æ•°ç›®](https://leetcode.cn/problems/maximum-number-of-vowels-in-a-substring-of-given-length/description/)ï¼š

    ```python
    class Solution:
        def maxVowels(self, s: str, k: int) -> int:
            ans = vowel = 0
            for i, c in enumerate(s):
                if c in "aeiou":            # 1. è¿›å…¥çª—å£
                    vowel += 1
                if i < k - 1:               # çª—å£å¤§å°ä¸è¶³ k
                    continue
                ans = max(ans, vowel)       # 2. æ›´æ–°ç­”æ¡ˆ
                if s[i - k + 1] in "aeiou": # 3. ç¦»å¼€çª—å£
                    vowel -= 1
            return ans
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯ s çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)

2. [çˆ±ç”Ÿæ°”çš„ä¹¦åº—è€æ¿](https://leetcode.cn/problems/grumpy-bookstore-owner/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šå°†é—®é¢˜æ‹†åˆ†æˆä¸¤ä¸ªå­é—®é¢˜**

    ```python
    class Solution:
        def maxSatisfied(self, customers: List[int], grumpy: List[int], minutes: int) -> int:
            # s[0]: è€æ¿ä¸ç”Ÿæ°”æ—¶çš„é¡¾å®¢æ•°é‡ä¹‹å’Œ
            # s[1]: é•¿åº¦ä¸º minutes çš„è¿ç»­å­æ•°ç»„ä¸­ï¼Œè€æ¿ç”Ÿæ°”æ—¶çš„é¡¾å®¢æ•°é‡ä¹‹å’Œï¼Œé€šè¿‡å®šé•¿æ»‘åŠ¨çª—å£è§£å†³
            # æœ€ç»ˆç­”æ¡ˆä¸º s0 + max_s1
            s = [0, 0]
            max_s1 = 0
            for i, (c, g) in enumerate(zip(customers, grumpy)):
                s[g] += c
                if i < minutes - 1:                     # çª—å£é•¿åº¦ä¸è¶³ minutes
                    continue
                max_s1 = max(max_s1, s[1])              # æ›´æ–° max_s1
                if grumpy[i - minutes + 1]:             # å› ä¸º s0 å’Œ s1 æ˜¯åˆ†å¼€ç»Ÿè®¡çš„ï¼Œæ‰€ä»¥ç¦»å¼€çª—å£æ—¶è¦åˆ¤æ–­
                    s[1] -= customers[i - minutes + 1]  # çª—å£æœ€å·¦è¾¹å…ƒç´ ç¦»å¼€çª—å£
            return s[0] + max_s1
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º customers çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)

3. [æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æ‰€æœ‰é•¿åº¦ä¸º K çš„äºŒè¿›åˆ¶å­ä¸²](https://leetcode.cn/problems/check-if-a-string-contains-all-binary-codes-of-size-k/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šç»Ÿè®¡æ‰€æœ‰å‡ºç°è¿‡çš„é•¿åº¦ä¸º k çš„ unique å­ä¸²ï¼Œåˆ¤æ–­ç»“æœæ˜¯å¦å’Œ 2 ** k ç›¸ç­‰**

    ```python
    class Solution:
        def hasAllCodes(self, s: str, k: int) -> bool:
            ans = set()
            left = 0
            for right, c in enumerate(s):        # 1. è¿›å…¥çª—å£
                if right < k - 1:                # çª—å£å¤§å°ä¸è¶³
                    continue
                ans.add(s[left : right + 1])     # 2. æ›´æ–°ç­”æ¡ˆ
                left += 1                        # 3. ç¦»å¼€çª—å£
            return len(ans) == 2 ** k
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º s çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO($2^k$), æœ€å¤šä¼šå­˜å‚¨$2^k$ä¸ªä¸åŒçš„å­ä¸²ã€‚

4. [å‡ ä¹å”¯ä¸€å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode.cn/problems/maximum-sum-of-almost-unique-subarray/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šåˆ©ç”¨ Counter æ¥ç»Ÿè®¡æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°**

    ```python
    class Solution:
        def maxSum(self, nums: List[int], m: int, k: int) -> int:
            ans = 0
            s = sum(nums[:k - 1])         # å…ˆç»Ÿè®¡å‰ k-1 ä¸ªæ•°
            cnt = Counter(nums[:k - 1])
            for out, in_ in zip(nums, nums[k - 1:]):
                s += in_                  # å†æ·»åŠ ä¸€ä¸ªæ•°å°±æ˜¯ k ä¸ªæ•°äº†
                cnt[in_] += 1
                if len(cnt) >= m:
                    ans = max(ans, s)     # æ˜¯å‡ ä¹å”¯ä¸€å­æ•°ç»„ï¼Œæ›´æ–°ç­”æ¡ˆ
                s -= out                  # ç¦»å¼€çª—å£
                cnt[out] -= 1
                if cnt[out] == 0:
                    del cnt[out]
            return ans
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º nums çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(k)ï¼Œå“ˆå¸Œè¡¨çš„å¤§å°ä¸ä¼šè¶…è¿‡çª—å£é•¿åº¦ kã€‚

5. [å¯è·å¾—çš„æœ€å¤§ç‚¹æ•°](https://leetcode.cn/problems/maximum-points-you-can-obtain-from-cards/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šé€†å‘æ€ç»´ - è½¬æ¢ä¸ºæ±‚æœ€å°å’Œ â¡ï¸ æœ€å°åŒ–å‰©ä¸‹çš„ç‚¹æ•°å’Œ**

    ```python
    class Solution:
        def maxScore(self, cardPoints: List[int], k: int) -> int:
            n = len(cardPoints)
            m = n - k
            s = 0
            min_s = math.inf
            # æ³¨æ„ python çš„enumerateæ— æ³•æå‰å–åˆ°åé¢çš„å…ƒç´ ï¼Œç‰¹æ®Šæƒ…å†µçš„åˆ¤æ–­
            if (m == 0):
                return sum(cardPoints)
            for i, num in enumerate(cardPoints):
                s += num
                if i < m - 1:
                    continue
                min_s = min(min_s, s)
                s -= cardPoints[i - m + 1]
            return sum(cardPoints) - min_s
    ```

    æ›´ç²¾ç®€çš„å†™æ³•ï¼š

    ```python
    class Solution:
        def maxScore(self, cardPoints: List[int], k: int) -> int:
            n = len(cardPoints)
            m = n - k
            min_s = s = sum(cardPoints[:m])
            for i in range(m, n):
                s += cardPoints[i] - cardPoints[i - m]
                min_s = min(min_s, s)
            return sum(cardPoints) - min_s
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º cardPoints çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚Python å¿½ç•¥åˆ‡ç‰‡å¼€é”€ã€‚

6. [æ‹†ç‚¸å¼¹](https://leetcode.cn/problems/defuse-the-bomb/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šä¸¾ä¾‹è¯¦ç»†æ¨æ¼”ï¼Œæ‰¾åˆ°è§„å¾‹ï¼Œå‘ç° k > 0 å’Œ k < 0 çš„æƒ…å†µç›¸åŒï¼Œå®šä¹‰å³è¾¹ç•Œ r å¾ˆå…³é”®**

    ```python
    class Solution:
        def decrypt(self, code: List[int], k: int) -> List[int]:
            # k > 0ï¼Œç¬¬ä¸€ä¸ªçª—å£çš„çš„ä¸‹æ ‡èŒƒå›´ä¸º [1, k + 1)
            # k < 0ï¼Œç¬¬ä¸€ä¸ªçª—å£çš„çš„ä¸‹æ ‡èŒƒå›´ä¸º [n - |k|, n)
            # çª—å£æ€»æ˜¯å‘å³ç§»åŠ¨ï¼Œç§»å…¥çª—å£çš„ä¸‹æ ‡æ˜¯ r % n, ç§»å‡ºçš„æ˜¯ (r - |k|) % n
            n = len(code)
            ans = [0] * n
            r = k + 1 if k > 0 else n  # å…³é”®ç‚¹ï¼šå®šä¹‰å³è¾¹ç•Œ r
            k = abs(k)
            s = sum(code[r - k: r])    # ans[0]
            for i in range(n):
                ans[i] = s
                s += code[r % n] - code[(r - k) % n]
                r += 1
            return ans
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º code çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚è¿”å›å€¼ä¸è®¡å…¥ï¼ŒPython å¿½ç•¥åˆ‡ç‰‡çš„ç©ºé—´ã€‚

7. [å­ä¸²çš„æœ€å¤§å‡ºç°æ¬¡æ•°](https://leetcode.cn/problems/maximum-number-of-occurrences-of-a-substring/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šmaxSize æ˜¯å¹²æ‰°é¡¹ï¼Œå­ä¸²è¶ŠçŸ­ï¼ŒåŒ…å«çš„ä¸åŒå­—æ¯ä¸ªæ•°è¶Šå°‘ï¼Œè¶Šèƒ½æ»¡è¶³ â‰¤ maxLetters çš„è¦æ±‚ã€‚å­ä¸²è¶ŠçŸ­ï¼Œå­ä¸²åœ¨ s ä¸­çš„å‡ºç°æ¬¡æ•°ä¹Ÿè¶Šå¤šã€‚æ‰€ä»¥æœ¬é¢˜åªéœ€è€ƒè™‘é•¿åº¦æ°å¥½ä¸º minSize çš„å­ä¸²ï¼ŒmaxSize æ˜¯å¤šä½™çš„ã€‚**

    ```python
    class Solution:
        def maxFreq(self, s: str, maxLetters: int, minSize: int, maxSize: int) -> int:
            n = len(s)
            d = defaultdict(int)
            for i in range(n - minSize + 1):
                tmp = s[i: i + minSize]
                c = set(tmp)
                if len(c) <= maxLetters:
                    d[tmp] += 1
            return max(d.values()) if d else 0
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n * minSize)
        - å¤–å±‚å¾ªç¯æ‰§è¡Œ n - minSize + 1 æ¬¡ï¼Œç®€åŒ–ä¸º O(n)
        - æ¯æ¬¡å¾ªç¯æˆªå–é•¿åº¦ä¸º minSize çš„å­ä¸²ï¼ˆå­—ç¬¦ä¸²åˆ‡ç‰‡å’Œé›†åˆè½¬æ¢ï¼‰ï¼Œå•æ¬¡å¾ªç¯å¤æ‚åº¦ä¸º O(minSize)ã€‚
        - å› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n * minSize)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(n * minSize)
        - æœ€å¤šä¼šå­˜å‚¨æ‰€æœ‰é•¿åº¦ä¸º minSize çš„ä¸åŒå­ä¸²ï¼Œç†è®ºä¸Šæœ€å¤š O(n) ä¸ªï¼ˆå®é™…è¿œå°äºï¼Œå› ä¸ºæœ‰é‡å¤ï¼‰ã€‚
        - æ¯ä¸ªå­ä¸²é•¿åº¦ä¸º minSizeï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(n * minSize)ã€‚

### Â§1.2 è¿›é˜¶

1. [æœ€å°‘äº¤æ¢æ¬¡æ•°æ¥ç»„åˆæ‰€æœ‰çš„ 1 II](https://leetcode.cn/problems/minimum-swaps-to-group-all-1s-together-ii/)ï¼š

    **å…³é”®æ€è·¯ï¼š**

    **1. æˆ‘ä»¬å·²ç»çŸ¥é“ 1 çš„å…¨éƒ¨ä¸ªæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ‹¿ 1 çš„ä¸ªæ•°è¿™ä¹ˆé•¿çš„çª—å£æ¥æ»‘åŠ¨**

    **2. æ±‚å‡ºçª—å£å’Œçš„æœ€å¤§å€¼ï¼Œç”¨ 1 çš„ä¸ªæ•°å‡å»çª—å£å’Œæœ€å¤§å€¼ï¼Œå°±æ˜¯æœ€å°‘çš„äº¤æ¢æ¬¡æ•°**

    **3. å¯¹äºç¯çŠ¶ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠåŸæ¥æ•°ç»„å†è¿½åŠ åˆ°å°¾éƒ¨ï¼Œè‡ªç„¶å°±é¦–å°¾ç›¸æ¥äº†**

    ```python
    class Solution:
        def minSwaps(self, nums: List[int]) -> int:
            k = sum(nums)
            max_s = s = sum(nums[:k])
            nums.extend(nums)
            for out, in_ in zip(nums, nums[k:]):
                s += in_ - out
                max_s = max(max_s, s)
            return k - max_s
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯ nums çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

2. [æ»‘åŠ¨å­æ•°ç»„çš„ç¾ä¸½å€¼](https://leetcode.cn/problems/sliding-subarray-beauty/description/)ï¼š

    **å…³é”®æ€è·¯ï¼š**

    **1. -50 <= nums[i] <= 50, æœ€å¤š 101 ä¸ªå…ƒç´ ã€‚å€¼åŸŸå¾ˆå°ï¼Œå¯ä»¥å€Ÿé‰´è®¡æ•°æ’åºï¼Œç”¨ä¸€ä¸ª cnt æ•°ç»„ç»´æŠ¤çª—å£å†…æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°ã€‚**

    **2. ç¾ä¸½å€¼æ˜¯è´Ÿæ•°æˆ– 0ï¼Œä¸ç”¨è€ƒè™‘æ­£æ•°çš„é‚£ä¸€åŠ**

    **3. æ±‚ç¬¬ x å°çš„æ•°ï¼šé€šè¿‡éå† cnt æ•°ç»„ï¼Œä»æœ€å°çš„æ•°-50å‡ºç°çš„æ¬¡æ•°å¼€å§‹-=ï¼Œç›´åˆ°<=0ï¼Œé‚£ä¹ˆé‚£ä¸ªæ•°å°±æ˜¯ç¬¬ x å°çš„äº†**

    ```python
    class Solution:
        def getSubarrayBeauty(self, nums: List[int], k: int, x: int) -> List[int]:
            n = len(nums)
            ans = [0] * (n - k + 1)
            cnt = [0] * 101            # -50 <= nums[i] <= 50, æœ€å¤š 101 ä¸ªå…ƒç´ 
            # [0, 1, ..., 50, 51, ..., 100]: cnt æ•°ç»„ä¸‹æ ‡
            #  0     1 ~ 50     -50 ~ -1   : cnt æ•°ç»„ä¸‹æ ‡ä»£è¡¨çš„æ•°å­— num[i]
            for num in nums[:k - 1]:   # å…ˆå¾€çª—å£å†…æ·»åŠ  k-1 ä¸ªæ•°
                cnt[num] += 1          # åˆ©ç”¨pythonçš„è¯­è¨€ç‰¹æ€§ï¼Œnumä¸ºè´Ÿæ•°åˆ™æ˜¯å¾€cntæ•°ç»„åé¢æ·»åŠ 
            for i, (out, in_) in enumerate(zip(nums, nums[k-1:])):
                cnt[in_] += 1           # è¿›å…¥çª—å£ï¼ˆä¿è¯çª—å£æœ‰æ°å¥½ k ä¸ªæ•°ï¼‰
                left = x
                for j in range(-50, 0): # æš´åŠ›æšä¸¾è´Ÿæ•°èŒƒå›´ [-50,-1], -50ä¸€å®šæ˜¯æœ€å°çš„
                    left -= cnt[j]
                    if left <= 0:       # æ‰¾åˆ°ç¾ä¸½å€¼
                        ans[i] = j
                        break
                cnt[out] -= 1           # ç¦»å¼€çª—å£
            return ans
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(nU)ï¼Œå…¶ä¸­ n ä¸º nums çš„é•¿åº¦ï¼ŒU=50ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(U)ã€‚

3. ğŸ“Œ [ä½¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—ç¬¦äº¤æ›¿çš„æœ€å°‘åè½¬æ¬¡æ•°](https://leetcode.cn/problems/minimum-number-of-flips-to-make-the-binary-string-alternating/description/)ï¼š

4. [å­—ç¬¦ä¸²çš„æ’åˆ—](https://leetcode.cn/problems/permutation-in-string/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ»‘åŠ¨çª—å£ + å­—å…¸ Counterï¼ˆæ’åˆ—çš„åˆ¤æ–­ï¼šä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦çš„ä¸ªæ•°éƒ½ç›¸ç­‰ï¼‰**

    ```python
    class Solution:
        def checkInclusion(self, s1: str, s2: str) -> bool:
            k = len(s1)
            cnt1 = Counter(s1)
            cnt2 = Counter(s2[:k-1])
            for out, in_ in zip(s2, s2[k-1:]):
                cnt2[in_] += 1
                if cnt2 == cnt1:
                    return True
                cnt2[out] -= 1
            return False
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º s2 çš„é•¿åº¦ã€‚
        - ä¸»å¾ªç¯éå† s2ï¼Œæ¯æ¬¡çª—å£ç§»åŠ¨åªæ¶‰åŠå¸¸æ•°æ¬¡å“ˆå¸Œè¡¨æ“ä½œï¼ˆåŠ å‡è®¡æ•°ã€æ¯”è¾ƒï¼‰ï¼Œå“ˆå¸Œè¡¨å¤§å°æœ€å¤šä¸º 26ï¼ˆå°å†™å­—æ¯ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥è§†ä¸ºå¸¸æ•°ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚
        - ä¸¤ä¸ª Counter å“ˆå¸Œè¡¨ï¼Œæœ€å¤šå­˜å‚¨ 26 ä¸ªå­—ç¬¦çš„è®¡æ•°ï¼Œç©ºé—´ä¸ºå¸¸æ•°ã€‚

5. ğŸ“Œ [ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²](https://leetcode.cn/problems/substring-with-concatenation-of-all-words/description/)ï¼š

6. ğŸ“Œ [æŸ¥æ‰¾ç»™å®šå“ˆå¸Œå€¼çš„å­ä¸²](https://leetcode.cn/problems/find-substring-with-given-hash-value/description/)ï¼š

7. ğŸ“Œ [ç»Ÿè®¡å®Œå…¨å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/count-complete-substrings/description/)ï¼š

8. ğŸ“Œ [å­ä¸²èƒ½è¡¨ç¤ºä» 1 åˆ° N æ•°å­—çš„äºŒè¿›åˆ¶ä¸²](https://leetcode.cn/problems/binary-string-with-substrings-representing-1-to-n/)ï¼š

    ```python
    class Solution:
        def queryString(self, s: str, n: int) -> bool:
            return all(bin(i)[2:] in s for i in range(1, n + 1))
    # 1. æš´åŠ›æšä¸¾ [1,n] å†…çš„æ•°ï¼Œè½¬æˆäºŒè¿›åˆ¶å­—ç¬¦ä¸²: 
    #    binå‡½æ•°å¯ä»¥å°†æ•´æ•°è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå»é™¤æ‰å‰é¢çš„ '0b'
    # 2. allæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚æœå¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸º True æ‰è¿”å›True
    ```

### Â§1.3 å…¶ä»–

1. [å­¦ç”Ÿåˆ†æ•°çš„æœ€å°å·®å€¼](https://leetcode.cn/problems/minimum-difference-between-highest-and-lowest-of-k-scores/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šå…ˆå°†æ•°ç»„ä»å°åˆ°å¤§æ’åºï¼Œç„¶ååªéœ€å–æ»‘åŠ¨çª—å£ä¸¤ç«¯çš„æœ€å°å·®å€¼å³å¯**

    ```python
    class Solution:
        def minimumDifference(self, nums: List[int], k: int) -> int:
            nums.sort()
            return min(in_ - out for out, in_ in zip(nums, nums[k-1:]))
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)
        - æ’åºæ“ä½œ nums.sort() éœ€è¦ O(n log n)ã€‚
        - æ»‘åŠ¨çª—å£éå† zip(nums, nums[k-1:]) åªéœ€ O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)
        - æ’åºåŸåœ°è¿›è¡Œï¼Œéå†åªç”¨å¸¸æ•°ç©ºé—´ã€‚

    ```python
    nums.sort()  # åŸåœ°æ’åºï¼Œä¼šç›´æ¥ä¿®æ”¹åŸåˆ—è¡¨ nums çš„é¡ºåºï¼Œä¸ä¼šè¿”å›æ–°çš„åˆ—è¡¨
    sorted(nums) # è¿”å›æ’åºåçš„æ–°åˆ—è¡¨
    ```

2. ğŸ“Œ [å­˜åœ¨é‡å¤å…ƒç´  III](https://leetcode.cn/problems/contains-duplicate-iii/description/)ï¼š

## äºŒã€ä¸å®šé•¿æ»‘åŠ¨çª—å£

### Â§2.1 æ±‚æœ€é•¿/æœ€å¤§
1. [æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠé˜Ÿåˆ—å·¦è¾¹çš„å…ƒç´ ç§»å‡ºç›´åˆ°æ»¡è¶³é¢˜ç›®è¦æ±‚**

    ```python
    class Solution:
    def lengthOfLongestSubstring(self, s: str) -> int:
        ans = left = 0
        cnt = defaultdict(int)
        for i, c in enumerate(s):
            cnt[c] += 1
            while cnt[c] > 1:
                cnt[s[left]] -= 1
                left += 1
            ans = max(ans, i - left + 1)
        return ans
    ```

    å†™æ³•äºŒï¼š

    ```python
    class Solution:
        def lengthOfLongestSubstring(self, s: str) -> int:
            ans = 0
            seen = []
            for c in s:
                while c in seen:
                    del seen[0]   # åˆ é™¤é˜Ÿåˆ—å·¦è¾¹ç¬¬ä¸€ä¸ªï¼Œç›´åˆ°æ²¡æœ‰é‡å¤çš„å­—ç¬¦ä¸²
                seen.append(c)
                ans = max(ans, len(seen))
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º s çš„é•¿åº¦ã€‚æ³¨æ„æ¯ä¸ªå­—ç¬¦æœ€å¤šè¿›çª—å£ä¸€æ¬¡ã€å‡ºçª—å£ä¸€æ¬¡ï¼Œleft æŒ‡é’ˆæœ€å¤šç§»åŠ¨ n æ¬¡ï¼Œæ‰€ä»¥æ•´ä½“æ˜¯ O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(âˆ£Î£âˆ£)ï¼Œå…¶ä¸­ âˆ£Î£âˆ£ ä¸ºå­—ç¬¦é›†åˆçš„å¤§å°ï¼Œæœ¬é¢˜ä¸­å­—ç¬¦å‡ä¸º ASCII å­—ç¬¦ï¼Œæ‰€ä»¥ âˆ£Î£âˆ£â‰¤128ã€‚

2. [æ¯ä¸ªå­—ç¬¦æœ€å¤šå‡ºç°ä¸¤æ¬¡çš„æœ€é•¿å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/maximum-length-substring-with-two-occurrences/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šç›¸å½“äºä¸Šé¢˜çš„ã€Œå‡ºç°æ¬¡æ•°ä¸è¶…è¿‡ 1ã€æ”¹æˆã€Œå‡ºç°æ¬¡æ•°ä¸è¶…è¿‡ 2ã€**

    ```python
    class Solution:
    def maximumLengthSubstring(self, s: str) -> int:
        ans = left = 0
        cnt = defaultdict(int)
        for i, c in enumerate(s):
            cnt[c] += 1
            while cnt[c] > 2:
                cnt[s[left]] -= 1
                left += 1
            ans = max(ans, i - left + 1)
        return ans
    ```

    å†™æ³•äºŒï¼š

    ```python
    class Solution:
        def maximumLengthSubstring(self, s: str) -> int:
            ans = 0
            seen = []
            cnt = defaultdict(int)
            for c in s:
                cnt[c] += 1
                while c in seen and cnt[c] > 2:
                    cnt[seen[0]] -= 1
                    del seen[0]
                seen.append(c)
                ans = max(ans, len(seen))
            return ans
    ```

3. [åˆ æ‰ä¸€ä¸ªå…ƒç´ ä»¥åå…¨ä¸º 1 çš„æœ€é•¿å­æ•°ç»„](https://leetcode.cn/problems/longest-subarray-of-1s-after-deleting-one-element/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ³¨æ„é¢˜ç›®è¦æ±‚ä¸€å®šè¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆå³ä¾¿å…¨æ˜¯1ä¹Ÿè¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œé—®é¢˜è½¬åŒ–ä¸º: æ±‚æœ€é•¿å­æ•°ç»„çš„é•¿åº¦ï¼ˆå‡ä¸€ï¼‰ï¼Œæ»¡è¶³å­æ•°ç»„è‡³å¤šæœ‰ä¸€ä¸ª 0**

    ```python
    class Solution:
        def longestSubarray(self, nums: List[int]) -> int:
            ans = left = cnt0 = 0
            for right, x in enumerate(nums):
                cnt0 += 1 - x                # ç»´æŠ¤çª—å£ä¸­çš„ 0 çš„ä¸ªæ•°
                while cnt0 > 1:              # å½“ 0 çš„æ•°é‡å¤§äº1ï¼Œå·¦æŒ‡é’ˆå°±å¾€å³æ»‘
                    cnt0 -= 1 - nums[left]   # å¦‚æœ nums[left] æ˜¯ 0ï¼Œè¦å‡æ‰ 
                    left += 1
                ans = max(ans, right - left) # right - left + 1, ä½†æ˜¯è¿˜è¦å»é™¤è¢«åˆ æ‰çš„é‚£ä¸ªå…ƒç´ 
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯ nums çš„é•¿åº¦ã€‚è™½ç„¶å†™äº†ä¸ªäºŒé‡å¾ªç¯ï¼Œä½†æ˜¯å†…å±‚å¾ªç¯ä¸­å¯¹ left åŠ ä¸€çš„æ€»æ‰§è¡Œæ¬¡æ•°ä¸ä¼šè¶…è¿‡ n æ¬¡ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚


4. [å°½å¯èƒ½ä½¿å­—ç¬¦ä¸²ç›¸ç­‰](https://leetcode.cn/problems/get-equal-substrings-within-budget/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ¯ä¸€æ¬¡å­—ç¬¦è½¬åŒ–çš„ cost å·²çŸ¥ï¼Œ å°†é—®é¢˜è½¬åŒ–ä¸ºï¼šåœ¨è¿ç»­å­æ•°ç»„çš„å’Œå°äºç­‰äº maxCost çš„æƒ…å†µä¸‹ï¼Œæ‰¾åˆ°æœ€é•¿çš„è¿ç»­å­æ•°ç»„é•¿åº¦ã€‚**

    ```python
    class Solution:
        def equalSubstring(self, s: str, t: str, maxCost: int) -> int:
            ans = sum = left = 0
            for right in range(len(s)):
                sum += abs(ord(s[right]) - ord(t[right]))
                while sum > maxCost:
                    sum -= abs(ord(s[left]) - ord(t[left]))
                    left += 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

5. [æ‰¾åˆ°æœ€é•¿çš„åŠé‡å¤å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/find-the-longest-semi-repetitive-substring/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šå®šä¹‰ same æ¥ç»Ÿè®¡ç›¸é‚»ç›¸åŒçš„æƒ…å†µå‡ºç°äº†å¤šå°‘æ¬¡ï¼Œå¦‚æœ same > 1ï¼Œåˆ™ä¸æ–­ç§»åŠ¨å·¦æŒ‡é’ˆ left ç›´åˆ° s[left] == s[left âˆ’ 1]ï¼Œæ­¤æ—¶å°†ä¸€å¯¹ç›¸åŒçš„å­—ç¬¦ç§»åˆ°çª—å£ä¹‹å¤–ï¼Œç„¶åå°† same ç½®ä¸º 1**

    > "å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸² t ä¸­è‡³å¤šæœ‰ä¸€å¯¹ç›¸é‚»å­—ç¬¦æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆç§°è¿™ä¸ªå­—ç¬¦ä¸² t æ˜¯åŠé‡å¤çš„ã€‚" è‡³å¤š è¡¨ç¤º æ²¡æœ‰ä¹Ÿè¡Œï¼Œå› æ­¤ansçš„åˆå§‹å€¼æ˜¯ 1

    ```python
    class Solution:
        def longestSemiRepetitiveSubstring(self, s: str) -> int:
            ans, left, same = 1, 0, 0
            for right in range(1, len(s)):
                if s[right] == s[right - 1]:
                    same += 1
                if same > 1:
                    left += 1
                    while s[left] != s[left - 1]:
                        left += 1
                    same = 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º s çš„é•¿åº¦ã€‚æ³¨æ„ left åªä¼šå¢åŠ ä¸ä¼šå‡å°‘ï¼Œæ‰€ä»¥äºŒé‡å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ä»…ç”¨åˆ°è‹¥å¹²é¢å¤–å˜é‡ã€‚

6. [æœ€å¤š K ä¸ªé‡å¤å…ƒç´ çš„æœ€é•¿å­æ•°ç»„](https://leetcode.cn/problems/length-of-longest-subarray-with-at-most-k-frequency/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šåŒæŒ‡é’ˆ**

    ```python
    class Solution:
        def maxSubarrayLength(self, nums: List[int], k: int) -> int:
            ans = left = 0
            cnt = Counter() # æˆ– cnt = defaultdict(int)
            for right, n in enumerate(nums):
                cnt[n] += 1
                while cnt[n] > k:
                    cnt[nums[left]] -= 1
                    left += 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æ:

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸º nums çš„é•¿åº¦ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚

7. [æ•°ç»„çš„æœ€å¤§ç¾ä¸½å€¼](https://leetcode.cn/problems/maximum-beauty-of-an-array-after-applying-operation/)ï¼š

    **å…³é”®æ€è·¯ï¼š**

    **1. é€‰çš„æ˜¯å­åºåˆ—ï¼Œä¸”æ“ä½œåå­åºåˆ—çš„å…ƒç´ éƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥å…ƒç´ é¡ºåºå¯¹ç­”æ¡ˆæ²¡æœ‰å½±å“ï¼Œå¯ä»¥å…ˆå¯¹æ•°ç»„æ’åº**

    **2. é¢˜ç›®è¦æ±‚çš„ã€Œç”±ç›¸ç­‰å…ƒç´ ç»„æˆçš„æœ€é•¿å­åºåˆ—ã€ï¼Œç›¸å½“äºé€‰å‡ºè‹¥å¹²é—­åŒºé—´ï¼Œè¿™äº›åŒºé—´çš„äº¤é›†ä¸ä¸ºç©ºã€‚æ’åºåï¼Œé€‰å‡ºçš„åŒºé—´æ˜¯è¿ç»­çš„ï¼Œæˆ‘ä»¬åªéœ€è€ƒè™‘æœ€å·¦è¾¹çš„åŒºé—´ [x âˆ’ k, x + k] å’Œæœ€å³è¾¹çš„åŒºé—´ [y âˆ’ k, y + k]ï¼Œå¦‚æœè¿™ä¸¤ä¸ªåŒºé—´çš„äº¤é›†ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆé€‰å‡ºçš„è¿™äº›åŒºé—´çš„äº¤é›†å°±ä¸ä¸ºç©ºï¼Œå³ x + k â‰¥ y âˆ’ kï¼Œä¹Ÿå°±æ˜¯ y - x â‰¤ 2k**

    **3. å°†é—®é¢˜è½¬åŒ–ä¸ºï¼šæ’åºåï¼Œæ‰¾æœ€é•¿çš„è¿ç»­å­æ•°ç»„ï¼Œå…¶æœ€å¤§å€¼å‡æœ€å°å€¼ â‰¤ 2k**

    ```python
    class Solution:
        def maximumBeauty(self, nums: List[int], k: int) -> int:
            nums.sort()
            ans = left = 0
            for right, n in enumerate(nums):
                while n - nums[left] > 2 * k:
                    left += 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œå…¶ä¸­ n ä¸º nums çš„é•¿åº¦ã€‚ç“¶é¢ˆåœ¨æ’åºä¸ŠO(nlogn)ã€‚è™½ç„¶å†™äº†ä¸ªäºŒé‡å¾ªç¯ï¼Œä½†æ˜¯å†…å±‚å¾ªç¯ä¸­å¯¹ left åŠ ä¸€çš„æ€»æ‰§è¡Œæ¬¡æ•°ä¸ä¼šè¶…è¿‡ n æ¬¡ï¼Œæ‰€ä»¥æ»‘çª—é‚£éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚å¿½ç•¥æ’åºçš„æ ˆå¼€é”€ï¼Œä»…ç”¨åˆ°è‹¥å¹²é¢å¤–å˜é‡ã€‚

8. [è€ƒè¯•çš„æœ€å¤§å›°æ‰°åº¦](https://leetcode.cn/problems/maximize-the-confusion-of-an-exam/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šå°†é¢˜ç›®è½¬åŒ–ä¸ºæ±‚ answerKey çš„ä¸€ä¸ªæœ€é•¿å­ä¸²ï¼Œè‡³å¤šåŒ…å« k ä¸ª T æˆ–è€…è‡³å¤šåŒ…å« k ä¸ª Fï¼Œæ»‘åŠ¨çª—å£ç›´åˆ° T å’Œ F çš„å‡ºç°æ¬¡æ•°è‡³å°‘æœ‰ä¸€ä¸ª â‰¤ k å³å¯**

    ```python
    class Solution:
        def maxConsecutiveAnswers(self, answerKey: str, k: int) -> int:
            ans = left = 0
            cnt = defaultdict(int)
            for right, c in enumerate(answerKey):
                cnt[c] += 1
                while cnt['T'] > k and cnt['F'] > k:
                    cnt[answerKey[left]] -= 1
                    left += 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯ answerKey çš„é•¿åº¦ã€‚è™½ç„¶å†™äº†ä¸ªäºŒé‡å¾ªç¯ï¼Œä½†æ˜¯å†…å±‚å¾ªç¯ä¸­å¯¹ left åŠ ä¸€çš„æ€»æ‰§è¡Œæ¬¡æ•°ä¸ä¼šè¶…è¿‡ n æ¬¡ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

9. [æœ€é«˜é¢‘å…ƒç´ çš„é¢‘æ•°](https://leetcode.cn/problems/frequency-of-the-most-frequent-element/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šè½¬åŒ–ä¸ºæ±‚é¢ç§¯ï¼Œæ’åºåï¼Œç§»åŠ¨çª—å£æ—¶æ±‚å‡ºç›¸é‚»ä¸¤ä¸ªæŸ±å­ä¹‹é—´çš„é¢ç§¯å·®ï¼Œä¸æ–­å åŠ é¢ç§¯ç›´åˆ°æ¶ˆè€—å®Œ kï¼Œå°±æ˜¯æ­¤æ—¶èƒ½å¤Ÿè¦†ç›–æœ€å¤šçš„æŸ±å­æ•°é‡ï¼Œæ›´æ–°ç­”æ¡ˆ**

    ![alt text](../img/image-69.png){ width="350" }

    ```python
    class Solution:
        def maxFrequency(self, nums: List[int], k: int) -> int:
            nums.sort()
            ans = 1
            s = left = 0
            for right in range(1, len(nums)):
                s += (nums[right] - nums[right - 1]) * (right - left)
                while s > k: # è¯´æ˜å½“å‰çª—å£å†…çš„å…ƒç´ æ— æ³•é€šè¿‡ k æ¬¡æ“ä½œå˜ä¸ºç›¸åŒçš„å€¼
                    s -= nums[right] - nums[left]
                    left += 1
                ans = max(ans, right - left + 1)
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ï¼Œéå†æ•°ç»„å’Œæ»‘åŠ¨çª—å£çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚å› æ­¤ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚


10. [æ¯ç§å­—ç¬¦è‡³å°‘å– K ä¸ª](https://leetcode.cn/problems/take-k-of-each-character-from-left-and-right/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šç›¸å½“äºæœ€å¤§åŒ–ä¸­é—´çª—å£çš„é•¿åº¦ï¼Œé‚£ä¹ˆå¯ä»¥ä¸€å¼€å§‹å°†æ‰€æœ‰å…ƒç´ å–èµ°ï¼Œç„¶ååœ¨çª—å£ç§»åŠ¨çš„æ—¶å€™æŠŠå…ƒç´ æ”¾å›çª—å£ï¼Œä¸€æ—¦çª—å£å¤–æŸä¸ªå…ƒç´ çš„ä¸ªæ•°é™åˆ°äº† k ä¸ªä»¥ä¸‹ï¼Œå°±ç§»åŠ¨å·¦è¾¹ç•Œ**

    ```python
    class Solution:
        def takeCharacters(self, s: str, k: int) -> int:
            cnt = Counter(s)            # ä¸€å¼€å§‹å°†æ‰€æœ‰å…ƒç´ å–èµ°
            if any(cnt[c] < k for c in "abc"):
                return -1
            left = mx = 0               # mx è®°å½•çª—å£çš„æœ€å¤§é•¿åº¦
            for right, c in enumerate(s):
                cnt[c] -= 1             # å°† c æ”¾åˆ°çª—å£å†…ï¼Œä¹Ÿå°±æ˜¯å–èµ°çš„å…ƒç´ å‡1
                while cnt[c] < k:
                    cnt[s[left]] += 1   # æŠŠ left å¯¹åº”çš„å…ƒç´ ä»çª—å£å–èµ°
                    left += 1
                mx = max(mx, right - left + 1)
            return len(s) - mx
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚ä¸»å¾ªç¯éå† sï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤šè¿›çª—å£ä¸€æ¬¡ã€å‡ºçª—å£ä¸€æ¬¡ï¼Œleft æŒ‡é’ˆæœ€å¤šç§»åŠ¨ n æ¬¡ï¼Œæ‰€ä»¥æ•´ä½“æ˜¯ O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚cnt å“ˆå¸Œè¡¨æœ€å¤šå­˜å‚¨ 3 ä¸ªå­—ç¬¦ï¼ˆ'a', 'b', 'c'ï¼‰ï¼Œç©ºé—´ä¸ºå¸¸æ•°ã€‚

11. ğŸ“Œ[æ‰¾å‡ºæœ€é•¿ç­‰å€¼å­æ•°ç»„](https://leetcode.cn/problems/find-the-longest-equal-subarray/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šåˆ†ç»„æ»‘çª—**

    **1. æŠŠç›¸åŒå…ƒç´ åˆ†ç»„ï¼Œç›¸åŒå…ƒç´ çš„ä¸‹æ ‡è®°å½•åˆ°å“ˆå¸Œè¡¨ï¼ˆæˆ–è€…æ•°ç»„ï¼‰pos_lists ä¸­**

    **2. éå† pos_lists ä¸­çš„æ¯ä¸ªä¸‹æ ‡åˆ—è¡¨ posï¼Œåœ¨ pos é‡Œç”¨æ»‘åŠ¨çª—å£ï¼Œæ­¤æ—¶å­æ•°ç»„çš„é•¿åº¦ä¸º pos[right] âˆ’ pos[left] + 1ï¼Œè¿™ä¸ªå­æ•°ç»„æœ‰ right âˆ’ left + 1 ä¸ªæ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆéœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°å°±æ˜¯ pos[right] âˆ’ pos[left] âˆ’ (right âˆ’ left)ï¼Œç”¨å®ƒæ¥å’Œ k åšæ¯”è¾ƒ**

    **3. ä»£ç å®ç°æ—¶ï¼Œä¸ºç®€åŒ–ä¸Šå¼ï¼Œpos å®é™…ä¿å­˜ pos[i] âˆ’ iï¼Œéœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°åˆ™ç®€åŒ–ä¸º pos[right] âˆ’ pos[left]**

    ```python
    class Solution:
        def longestEqualSubarray(self, nums: List[int], k: int) -> int:
            pos_lists = defaultdict(list)
            for i, n in enumerate(nums):
                pos_lists[n].append(i - len(pos_lists[n]))
            ans = 0
            for pos in pos_lists.values():
                if len(pos) < ans:
                    continue        # æ— æ³•è®© ans å˜å¾—æ›´å¤§
                left = 0
                for right in range(len(pos)):
                    while pos[right] - pos[left] > k:
                        left += 1
                    ans = max(ans, right - left + 1)
            return ans
    ```

12. ğŸ“Œ [æ¯¯å­è¦†ç›–çš„æœ€å¤šç™½è‰²ç –å—æ•°](https://leetcode.cn/problems/maximum-white-tiles-covered-by-a-carpet/description/)ï¼š

13. ğŸ“Œ [æ‘˜æ°´æœ](https://leetcode.cn/problems/maximum-fruits-harvested-after-at-most-k-steps/description/)ï¼š
14. ğŸ“Œ [ä¸¤ä¸ªçº¿æ®µè·å¾—çš„æœ€å¤šå¥–å“](https://leetcode.cn/problems/maximize-win-from-two-segments/description/)ï¼š
15. ğŸ“Œ [ä½¿æ•°ç»„è¿ç»­çš„æœ€å°‘æ“ä½œæ•°](https://leetcode.cn/problems/minimum-number-of-operations-to-make-array-continuous/)ï¼š
16. ğŸ“Œ [å¯è§ç‚¹çš„æœ€å¤§æ•°ç›®](https://leetcode.cn/problems/maximum-number-of-visible-points/description/)ï¼š
17. ğŸ“Œ [æœ€é•¿åˆæ³•å­å­—ç¬¦ä¸²çš„é•¿åº¦](https://leetcode.cn/problems/length-of-the-longest-valid-substring/)ï¼š
18. ğŸ“Œ [æ‰§è¡Œæ“ä½œä½¿é¢‘ç‡åˆ†æ•°æœ€å¤§](https://leetcode.cn/problems/apply-operations-to-maximize-frequency-score/description/)ï¼š
19. ğŸ“Œ [ç§»åŠ¨çŸ³å­ç›´åˆ°è¿ç»­ II](https://leetcode.cn/problems/moving-stones-until-consecutive-ii/)ï¼š
20. ğŸ“Œ [è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-with-at-least-k-repeating-characters/)ï¼š
21. ğŸ“Œ [æœ€é•¿çš„ç¾å¥½å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/longest-nice-substring/)ï¼š

### Â§2.2 æ±‚æœ€çŸ­/æœ€å°

1. [æœ€çŸ­ä¸”å­—å…¸åºæœ€å°çš„ç¾ä¸½å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/shortest-and-lexicographically-smallest-beautiful-string/description/)ï¼š

    ```python
    class Solution:
        def shortestBeautifulSubstring(self, s: str, k: int) -> str:
            if s.count('1') < k:
                return ''
            ans = s
            cnt1 = left = 0
            for right, c in enumerate(s):
                cnt1 += int(c)
                while cnt1 > k or s[left] == '0':
                    cnt1 -= int(s[left])
                    left += 1
                if cnt1 == k:
                    t = s[left: right + 1]
                    if len(t) < len(ans) or len(t) == len(ans) and t < ans:
                    # è¦ä¹ˆæ˜¯té•¿åº¦æ›´çŸ­ï¼Œè¦ä¹ˆæ˜¯é•¿åº¦ç›¸åŒä½†å­—å…¸åºæ›´å°(æ³¨æ„åˆ«å¿˜äº†len(t) == len(ans))
                        ans = t
            return ans
    ```

    å¤æ‚åº¦åˆ†æï¼š

    - æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚ä¸»å¾ªç¯éå† sï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤šè¿›çª—å£ä¸€æ¬¡ã€å‡ºçª—å£ä¸€æ¬¡ï¼Œleft æŒ‡é’ˆæœ€å¤šç§»åŠ¨ n æ¬¡ï¼Œæ‰€ä»¥æ•´ä½“æ˜¯ O(n)ã€‚
    - ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚å­˜å‚¨ç»“æœå­—ç¬¦ä¸² ans å’Œä¸´æ—¶å­ä¸² tï¼Œæœ€åæƒ…å†µä¸‹éœ€è¦ O(n) ç©ºé—´ã€‚

2. [æ›¿æ¢å­ä¸²å¾—åˆ°å¹³è¡¡å­—ç¬¦ä¸²](https://leetcode.cn/problems/replace-the-substring-for-balanced-string/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šåªæœ‰å½“é™¤å»ã€Œå¾…æ›¿æ¢å­ä¸²ã€å‰©ä¸‹çš„å­—ç¬¦çš„å‡ºç°æ¬¡æ•° <= m æ—¶ï¼Œæ‰æ»¡è¶³æ¡ä»¶ã€‚ä¾‹å¦‚ QQQQï¼Œåªæœ‰ right èµ°åˆ° 2 (ã€Œå¾…æ›¿æ¢å­ä¸²ã€ä¸º QQQ) æˆ– 3 (ã€Œå¾…æ›¿æ¢å­ä¸²ã€ä¸º QQQQ) çš„æ—¶å€™æ‰æ»¡è¶³æ¡ä»¶ï¼Œæ­¤æ—¶å°† QQQ æ›¿æ¢ä¸ºç±»ä¼¼ WER å³å¯æˆ–å°† QQQQ æ›¿æ¢ä¸º WERQ**

    ```python
    class Solution:
        def balancedString(self, s: str) -> int:
            m = len(s) // 4
            cnt = Counter(s) # cnt è®°å½•é™¤å» å¾…æ›¿æ¢å­ä¸² å‰©ä¸‹çš„å­—ç¬¦çš„å‡ºç°æ¬¡æ•°
            if len(cnt) == 4 and min(cnt.values()) == m: # å·²ç»ç¬¦åˆè¦æ±‚
                return 0
            ans, left = inf, 0
            for right, c in enumerate(s):
                cnt[c] -= 1
                while max(cnt.values()) <= m: # > m åˆ™æ ¹æœ¬æ— æ³•æ›¿æ¢å¾—åˆ°
                    ans = min(ans, right - left + 1)
                    cnt[s[left]] += 1
                    left += 1
            return ans
    ```

3. [æ— é™æ•°ç»„çš„æœ€çŸ­å­æ•°ç»„](https://leetcode.cn/problems/minimum-size-subarray-in-infinite-array/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ— é™æ•°ç»„çš„å¤„ç†**

    ![alt text](../img/image-40.png){ width="450" }

    ```python
    class Solution:
        def minSizeSubarray(self, nums: List[int], target: int) -> int:
            total = sum(nums)
            n = len(nums)
            ans = inf
            left = s = 0
            new_target = target % total
            for right in range(2 * n):
                s += nums[right % n]
                while s > new_target:
                    s -= nums[left % n]
                    left += 1
                if s == new_target:
                    ans = min(ans, right - left + 1)
            return ans + target // total * n if ans != inf else -1
    ```
4. [åˆ é™¤æœ€çŸ­çš„å­æ•°ç»„ä½¿å‰©ä½™æ•°ç»„æœ‰åº](https://leetcode.cn/problems/shortest-subarray-to-be-removed-to-make-array-sorted/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šåŒå‘åŒæŒ‡é’ˆï¼ˆä¸å®šé•¿æ»‘åŠ¨çª—å£ï¼‰**

    ```python
    class Solution:
        def findLengthOfShortestSubarray(self, arr: List[int]) -> int:
            # åˆ é™¤ä¸­é—´çš„ (left, right)çš„è¿™ä¸€æ®µï¼Œæ³¨æ„ä¸¤è¾¹éƒ½æ˜¯å¼€åŒºé—´
            n = len(arr)
            right = n - 1
            while right and arr[right - 1] <= arr[right]:
                right -= 1
            if right == 0: # arr å·²ç»æ˜¯éé€’å‡æ•°ç»„
                return 0
            ans = right    # æ­¤æ—¶ arr[right-1] > arr[right]ï¼Œåˆ é™¤ arr[:right]
            left = 0
            while left == 0 or arr[left - 1] <= arr[left]:
                while right < n and arr[left] > arr[right]:
                    right += 1
                # æ­¤æ—¶ arr[left] <= arr[right]ï¼Œåˆ é™¤ arr[left+1:right]
                ans = min(ans, right - left - 1)
                left += 1 # æšä¸¾ left
            return ans
    ```

5. ğŸ“Œ [æœ€å°è¦†ç›–å­ä¸²](https://leetcode.cn/problems/minimum-window-substring/description/)ï¼š
6. ğŸ“Œ [æœ€å°åŒºé—´](https://leetcode.cn/problems/smallest-range-covering-elements-from-k-lists/description/)ï¼š

### Â§2.3 æ±‚å­æ•°ç»„ä¸ªæ•°

#### Â§2.3.1 è¶Šé•¿è¶Šåˆæ³•

ä¸€èˆ¬è¦å†™ `ans += left`ã€‚æ»‘åŠ¨çª—å£çš„å†…å±‚å¾ªç¯ç»“æŸæ—¶ï¼Œå³ç«¯ç‚¹å›ºå®šåœ¨ rightï¼Œå·¦ç«¯ç‚¹åœ¨ 0, 1, 2, â€¦, left âˆ’ 1 çš„æ‰€æœ‰å­æ•°ç»„ï¼ˆå­ä¸²ï¼‰éƒ½æ˜¯åˆæ³•çš„ï¼Œè¿™ä¸€å…±æœ‰ left ä¸ªã€‚

1. [åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®](https://leetcode.cn/problems/number-of-substrings-containing-all-three-characters/description/)ï¼š

    ```python
    class Solution:
        def numberOfSubstrings(self, s: str) -> int:
            ans = left = 0
            cnt = defaultdict(int)
            for c in s:
                cnt[c] += 1
                while len(cnt) == 3:
                    cnt[s[left]] -= 1
                    if cnt[s[left]] == 0:
                        del cnt[s[left]]
                    left += 1
                # åˆ°è¿™é‡Œæ—¶ï¼Œå³ç«¯ç‚¹å›ºå®šåœ¨ rightï¼Œå·¦ç«¯ç‚¹åœ¨ 0,1,2,â‹¯,leftâˆ’1 
                # çš„æ‰€æœ‰å­ä¸²éƒ½æ˜¯åˆæ³•çš„ï¼Œè¿™ä¸€å…±æœ‰ left ä¸ªï¼ŒåŠ å…¥ç­”æ¡ˆ
                ans += left
            return ans
    ```

2. [å­—ç¬¦è‡³å°‘å‡ºç° K æ¬¡çš„å­å­—ç¬¦ä¸² I](https://leetcode.cn/problems/count-substrings-with-k-frequency-characters-i/description/)ï¼š

    ```python
    class Solution:
        def numberOfSubstrings(self, s: str, k: int) -> int:
            ans = left = 0
            cnt = defaultdict(int)
            for c in s:
                cnt[c] += 1
                while cnt[c] >= k:
                    cnt[s[left]] -= 1
                    left += 1
                ans += left
            return ans
    ```

3. [ç»Ÿè®¡å¥½å­æ•°ç»„çš„æ•°ç›®](https://leetcode.cn/problems/count-the-number-of-good-subarrays/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ³¨æ„é¢˜ç›®ä¸­çš„ â€œä¸€å¯¹â€ï¼Œæ­¤æ—¶å®šä¹‰ pairs æ­£å¥½å¯ä»¥æ¥å®ç°**

    ```python
    class Solution:
        def countGood(self, nums: List[int], k: int) -> int:
            ans = left = pairs = 0
            cnt = defaultdict(int)
            for n in nums:
                pairs += cnt[n] # æ³¨æ„æ˜¯å…ˆå¢åŠ  pairs å†å¢åŠ  cnt
                cnt[n] += 1
                while pairs >= k:
                    cnt[nums[left]] -= 1
                    pairs -= cnt[nums[left]]
                    left += 1
                ans += left
            return ans
    ```

4. ğŸ“Œ [ç»Ÿè®¡é‡æ–°æ’åˆ—ååŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²æ•°ç›® II](https://leetcode.cn/problems/count-substrings-that-can-be-rearranged-to-contain-a-string-ii/description/)

#### Â§2.3.2 è¶ŠçŸ­è¶Šåˆæ³•

ä¸€èˆ¬è¦å†™ `ans += right - left + 1`ã€‚æ»‘åŠ¨çª—å£çš„å†…å±‚å¾ªç¯ç»“æŸæ—¶ï¼Œå³ç«¯ç‚¹å›ºå®šåœ¨ rightï¼Œå·¦ç«¯ç‚¹åœ¨ left, left + 1, â€¦, right çš„æ‰€æœ‰å­æ•°ç»„ï¼ˆå­ä¸²ï¼‰éƒ½æ˜¯åˆæ³•çš„ï¼Œè¿™ä¸€å…±æœ‰ right âˆ’ left + 1 ä¸ªã€‚

1. [ä¹˜ç§¯å°äº K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-product-less-than-k/description/)ï¼š

    ```python
    class Solution:
        def numSubarrayProductLessThanK(self, nums: List[int], k: int) -> int:
            if k <= 1:          # å¦åˆ™åœ¨ prod >= k æ—¶æŠ¥é”™ index out of range
                return 0        # æ³¨æ„é¢˜ç›® nums[i] >= 1
            ans = left = 0
            prod = 1
            for right, n in enumerate(nums):
                prod *= n
                while prod >= k: # ä¸æ»¡è¶³è¦æ±‚
                    prod //= nums[left]
                    left += 1
                ans += right - left + 1
            return ans
    ```

2. [ä¸é—´æ–­å­æ•°ç»„](https://leetcode.cn/problems/continuous-subarrays/description/)ï¼š

    **å…³é”®æ€è·¯ï¼šæ³¨æ„ max å¯¹ Counter æ¯”è¾ƒçš„æ˜¯ key**

    ```python
    class Solution:
        def continuousSubarrays(self, nums: List[int]) -> int:
            ans = left = 0
            cnt = Counter()
            for right, n in enumerate(nums):
                cnt[n] += 1
                while max(cnt) - min(cnt) > 2:
                    x = nums[left]
                    cnt[x] -= 1
                    if cnt[x] == 0:
                        del cnt[x]
                    left += 1
                ans += right - left + 1
            return ans
    ```

3. ğŸ“Œ [æ‰¾å‡ºå”¯ä¸€æ€§æ•°ç»„çš„ä¸­ä½æ•°](https://leetcode.cn/problems/find-the-median-of-the-uniqueness-array/description/)ï¼š

4. ğŸ“Œ [ç»Ÿè®¡æ»¡è¶³ K çº¦æŸçš„å­å­—ç¬¦ä¸²æ•°é‡ II](https://leetcode.cn/problems/count-substrings-that-satisfy-k-constraint-ii/description/)ï¼š

5. ğŸ“Œ [ç¾è§‚çš„èŠ±æŸ](https://leetcode.cn/problems/1GxJYY/description/)ï¼š

#### Â§2.3.3 æ°å¥½å‹æ»‘åŠ¨çª—å£

### Â§2.4 å…¶ä»–

## ä¸‰ã€å•åºåˆ—åŒæŒ‡é’ˆ

### Â§3.1 ç›¸å‘åŒæŒ‡é’ˆ

### Â§3.2 åŒå‘åŒæŒ‡é’ˆ

### Â§3.3 èƒŒå‘åŒæŒ‡é’ˆ

### Â§3.4 åŸåœ°ä¿®æ”¹

## å››ã€åŒåºåˆ—åŒæŒ‡é’ˆ

### Â§4.1 åŒæŒ‡é’ˆ

### Â§4.2 åˆ¤æ–­å­åºåˆ—

### Â§4.3 å…¶ä»–

## äº”ã€ä¸‰æŒ‡é’ˆ

## å…­ã€åˆ†ç»„å¾ªç¯